INFO:__main__:PORT environment variable: not set
INFO:__main__:Starting Unified Server on 0.0.0.0:8000
INFO:__main__:- A2A Agent Card: http://0.0.0.0:8000/agent-card
INFO:__main__:- A2A Tasks: http://0.0.0.0:8000/a2a/task
INFO:__main__:- MCP Endpoint: http://0.0.0.0:8000/mcp
INFO:__main__:- MCP SSE: http://0.0.0.0:8000/mcp/sse
INFO:__main__:- Health Check: http://0.0.0.0:8000/health
INFO:__main__:- API Signals: http://0.0.0.0:8000/api/signals
INFO:     Started server process [40742]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:__main__:API signals called with spec: 'eating out', max_results: 10
INFO:__main__:Created request: signal_spec='eating out' deliver_to=DeliverySpecification(platforms='all', countries=['US']) filters=SignalFilters(catalog_types=None, data_providers=None, max_cpm=None, min_coverage_percentage=None) max_results=5 principal_id=None
Loaded adapter for platform: index-exchange
Database already contains 10 segments, skipping data insertion
Database initialized with sample data
Found 575 segments from database
Total segments for AI ranking: 575
AI ranking took 2.70 seconds
INFO:__main__:Business logic result type: <class 'schemas.GetSignalsResponse'>
INFO:__main__:Business logic result: message="Found 10 signals for 'eating out' with 19.6%-49.3% coverage, $5.00 CPM, available on 1 platform. Additionally, 3 custom segments can be created to better match your specific targeting needs." context_id='ctx_1755020072_iw27xp' signals=[SignalResponse(signals_agent_segment_id='200071', name='Arts and Entertainment : DiningOut', description='Segment from Peer39', signal_type='audience', data_provider='Peer39', coverage_percentage=49.268996552595524, deployments=[PlatformDeployment(platform='index-exchange', account=None, is_live=True, scope='platform-wide', decisioning_platform_segment_id='ix_200071', estimated_activation_duration_minutes=60)], pricing=PricingModel(cpm=5.0, revenue_share_percentage=15.0, currency='USD'), has_coverage_data=True, has_pricing_data=True), SignalResponse(signals_agent_segment_id='200151', name='Food and Beverage', description='Segment from Peer39', signal_type='audience', data_provider='Peer39', coverage_percentage=19.609592605143476, deployments=[PlatformDeployment(platform='index-exchange', account=None, is_live=True, scope='platform-wide', decisioning_platform_segment_id='ix_200151', estimated_activation_duration_minutes=60)], pricing=PricingModel(cpm=5.0, revenue_share_percentage=15.0, currency='USD'), has_coverage_data=True, has_pricing_data=True), SignalResponse(signals_agent_segment_id='200158', name='Food and Beverage : Recipes', description='Segment from Peer39', signal_type='audience', data_provider='Peer39', coverage_percentage=47.12420051018971, deployments=[PlatformDeployment(platform='index-exchange', account=None, is_live=True, scope='platform-wide', decisioning_platform_segment_id='ix_200158', estimated_activation_duration_minutes=60)], pricing=PricingModel(cpm=5.0, revenue_share_percentage=15.0, currency='USD'), has_coverage_data=True, has_pricing_data=True), SignalResponse(signals_agent_segment_id='200445', name='Interest : Foodies', description='Segment from Peer39', signal_type='audience', data_provider='Peer39', coverage_percentage=19.681345444325125, deployments=[PlatformDeployment(platform='index-exchange', account=None, is_live=True, scope='platform-wide', decisioning_platform_segment_id='ix_200445', estimated_activation_duration_minutes=60)], pricing=PricingModel(cpm=5.0, revenue_share_percentage=15.0, currency='USD'), has_coverage_data=True, has_pricing_data=True), SignalResponse(signals_agent_segment_id='200485', name='Mobile Apps : Mobile App Categories : Food & Drink Apps', description='Segment from Peer39', signal_type='audience', data_provider='Peer39', coverage_percentage=22.42179482506091, deployments=[PlatformDeployment(platform='index-exchange', account=None, is_live=True, scope='platform-wide', decisioning_platform_segment_id='ix_200485', estimated_activation_duration_minutes=60)], pricing=PricingModel(cpm=5.0, revenue_share_percentage=15.0, currency='USD'), has_coverage_data=True, has_pricing_data=True), SignalResponse(signals_agent_segment_id='200330', name='Travel', description='Segment from Peer39', signal_type='audience', data_provider='Peer39', coverage_percentage=27.17964479420321, deployments=[PlatformDeployment(platform='index-exchange', account=None, is_live=True, scope='platform-wide', decisioning_platform_segment_id='ix_200330', estimated_activation_duration_minutes=60)], pricing=PricingModel(cpm=5.0, revenue_share_percentage=15.0, currency='USD'), has_coverage_data=True, has_pricing_data=True), SignalResponse(signals_agent_segment_id='200351', name='Travel : Hotels and Accommodation', description='Segment from Peer39', signal_type='audience', data_provider='Peer39', coverage_percentage=45.57111529329028, deployments=[PlatformDeployment(platform='index-exchange', account=None, is_live=True, scope='platform-wide', decisioning_platform_segment_id='ix_200351', estimated_activation_duration_minutes=60)], pricing=PricingModel(cpm=5.0, revenue_share_percentage=15.0, currency='USD'), has_coverage_data=True, has_pricing_data=True), SignalResponse(signals_agent_segment_id='200126', name='Business : Economics', description='Segment from Peer39', signal_type='audience', data_provider='Peer39', coverage_percentage=47.49795453602997, deployments=[PlatformDeployment(platform='index-exchange', account=None, is_live=True, scope='platform-wide', decisioning_platform_segment_id='ix_200126', estimated_activation_duration_minutes=60)], pricing=PricingModel(cpm=5.0, revenue_share_percentage=15.0, currency='USD'), has_coverage_data=True, has_pricing_data=True), SignalResponse(signals_agent_segment_id='200334', name='Travel : Destinations', description='Segment from Peer39', signal_type='audience', data_provider='Peer39', coverage_percentage=46.67375715921018, deployments=[PlatformDeployment(platform='index-exchange', account=None, is_live=True, scope='platform-wide', decisioning_platform_segment_id='ix_200334', estimated_activation_duration_minutes=60)], pricing=PricingModel(cpm=5.0, revenue_share_percentage=15.0, currency='USD'), has_coverage_data=True, has_pricing_data=True), SignalResponse(signals_agent_segment_id='200459', name='Interest : Tourists', description='Segment from Peer39', signal_type='audience', data_provider='Peer39', coverage_percentage=33.45141762118987, deployments=[PlatformDeployment(platform='index-exchange', account=None, is_live=True, scope='platform-wide', decisioning_platform_segment_id='ix_200459', estimated_activation_duration_minutes=60)], pricing=PricingModel(cpm=5.0, revenue_share_percentage=15.0, currency='USD'), has_coverage_data=True, has_pricing_data=True)] custom_segment_proposals=[CustomSegmentProposal(proposed_name='Eating Out : Restaurant Reviews & Recommendations', description="Targets web pages and articles specifically focused on restaurant reviews, recommendations, and 'best of' lists for dining establishments. This goes beyond general 'Dining Out' content to focus on users actively seeking guidance on where to eat.", target_signals="Keywords related to restaurant reviews (e.g., 'best restaurants near me,' 'restaurant ratings,' 'food critic,' 'Michelin star,' 'Yelp reviews,' 'OpenTable,' 'Zagat'), sentiment analysis indicating positive or negative reviews, structured data related to restaurant information (e.g., price range, cuisine type, user ratings). Pages mentioning specific review platforms or review publications (e.g. 'The Infatuation,' 'Eater,' 'Time Out').", estimated_coverage_percentage=1.8, estimated_cpm=7.0, creation_rationale="While 'Dining Out' captures the broad category, this segment focuses on users actively seeking *advice* on dining choices. It distinguishes itself by leveraging sentiment analysis and structured review data to ensure the content truly revolves around restaurant evaluations. This is more targeted than 'DiningOut' because it indicates a higher purchase intent (researching where to go) and is valuable as ads can be tailored to specific cuisine preferences or price points mentioned in the content.", custom_segment_id='custom_1_6544'), CustomSegmentProposal(proposed_name='Eating Out : Special Occasion Dining', description="Focuses on content related to planning or researching restaurants for special occasions like birthdays, anniversaries, graduations, holidays (Valentine's Day, Mother's Day), or corporate events.", target_signals="Keywords related to special occasions (e.g., 'birthday dinner,' 'anniversary restaurant,' 'romantic dinner,' 'graduation celebration,' 'holiday dining,' 'corporate event venue'), contextual cues indicating event planning (e.g., reservations for large parties, group menus, private dining rooms), content discussing event themes or decorations in relation to restaurants, mentions of specific holiday menus.", estimated_coverage_percentage=1.2, estimated_cpm=8.5, creation_rationale="This segment differentiates itself by targeting a specific *reason* for eating out. It's not just about dining, but about celebrating. This is more valuable than general 'Dining Out' targeting because the audience is actively planning an event and likely has a larger budget. Ad creatives can be specifically tailored to appeal to special occasion diners â€“ promoting pre-fixe menus, group dining options, or romantic atmospheres. The higher CPM reflects the increased value of targeting this specific, high-intent audience.", custom_segment_id='custom_2_8156'), CustomSegmentProposal(proposed_name='Eating Out : Culinary Experiences & Food Tourism', description='Targets content centered around unique culinary experiences, food-focused travel, and immersive dining adventures. This goes beyond basic restaurant listings to include cooking classes, food tours, wine tastings, and dining experiences that are part of a larger cultural or travel activity.', target_signals="Keywords related to culinary tourism (e.g., 'food tours,' 'cooking classes,' 'wine tasting,' 'culinary travel,' 'foodie destinations'), content discussing specific food-related events or festivals, articles highlighting unique or unusual dining experiences (e.g., dining in the dark, themed restaurants, experimental cuisine), mentions of local culinary specialties or regional dishes. Signals related to travel planning and itineraries that focus on food experiences.", estimated_coverage_percentage=0.9, estimated_cpm=9.0, creation_rationale="This segment bridges the gap between 'Dining Out' and 'Travel' by focusing on the *experiential* aspect of food. It targets a more adventurous and engaged audience interested in more than just a meal. It's valuable because it allows advertisers to promote unique dining offerings, travel packages, and culinary experiences to a highly receptive audience. This audience is more likely to spend money on memorable and authentic food-related activities, justifying the higher CPM.", custom_segment_id='custom_3_1921')] clarification_needed=None ranking_method='ai_ranking'
INFO:__main__:Found 10 signals in result.signals
INFO:     127.0.0.1:54661 - "GET /api/signals?spec=eating%20out HTTP/1.1" 200 OK
